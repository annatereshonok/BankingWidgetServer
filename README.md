# Проект: Виджет для отображения последних банковских операций

## Описание проекта

Этот проект разрабатывается для IT-отдела крупного банка и представляет собой бэкенд-часть новой фичи для личного кабинета клиента. Виджет будет отображать несколько последних успешных банковских операций клиента. Проект реализован на Python с использованием менеджера зависимостей Poetry.

## Функциональность

На текущий момент в проекте реализованы следующие функции:

### 1. `get_mask_card_number`
Принимает на вход номер карты и возвращает его маску. Номер карты отображается в формате `XXXX XX** **** XXXX`, где видны первые 6 цифр и последние 4 цифры, а остальные символы заменены на звездочки. Номер разбит на блоки по 4 цифры, разделенные пробелами.

**Пример:**
```python
get_mask_card_number("1234567890123456")  # Возвращает "1234 56** **** 3456"
```

### 2. `get_mask_account`
Принимает на вход номер счета и возвращает его маску. Номер счета отображается в формате **XXXX, где видны только последние 4 цифры, а перед ними — две звездочки.

**Пример:**
```python
get_mask_account("1234567890")  # Возвращает "**7890"
```

### 3. `get_mask_account`
Принимает на вход номер счета и возвращает его маску. Номер счета отображается в формате **XXXX, где видны только последние 4 цифры, а перед ними — две звездочки.

**Пример:**
```python
mask_account_card("Счет 1234567890")  # Возвращает "Счет **7890"
mask_account_card("VISA 1234567890123456")  # Возвращает "VISA 1234 56** **** 3456"
```

### 4. `get_date`
Принимает на вход строку с датой в формате "2024-03-11T02:26:18.671407" и возвращает строку с датой в формате "ДД.ММ.ГГГГ".

**Пример:**
```python
get_date("2024-03-11T02:26:18.671407")  # Возвращает "11.03.2024"
```

### 5. `filter_by_state`
Принимает список словарей и опциональное значение для ключа state (по умолчанию `'EXECUTED'`). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению.

**Пример:**
```python
filter_by_state([{"state": "EXECUTED"}, {"state": "PENDING"}])  # Возвращает [{"state": "EXECUTED"}]
```

### 6. `sort_by_date`
Принимает список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание). Функция возвращает новый список, отсортированный по дате (date).

**Пример:**
```python
sort_by_date([{"date": "2024-03-11"}, {"date": "2024-03-10"}])  # Возвращает [{"date": "2024-03-11"}, {"date": "2024-03-10"}]
```


## Установка

Для установки зависимостей используйте [Poetry](https://python-poetry.org/).

### 1. Убедитесь, что у вас установлен Python 3.8 или выше.

### 2. Установите Poetry, если он еще не установлен:
```bash
pip install poetry
```

### 3. Клонируйте репозиторий:
```bash
git clone https://github.com/annatereshonok/BankingWidgetServer.git
cd BankingWidgetServer
```

### 4. Установите зависимости:
```bash
poetry install
```

### 5. Активируйте виртуальное окружение:
```bash
poetry shell
```

## Структура проекта
```plaintext
bank-widget-backend/
├── src/
│   ├── __init__.py
│   ├── masks.py
│   ├── widget.py
│   └── processing.py
├── tests/
│   ├── __init__.py
│   ├── confest.py
│   ├── test_masks.py
│   ├── test_widget.py
│   └── test_processing.py
├── main.py
├── pyproject.toml
├── README.md
└── .gitignore
```

## Тестирование

Этот проект использует `pytest` для написания и запуска тестов.


## Запуск тестов

Для запуска всех тестов выполните следующую команду:

```sh
pytest
```

## Покрытие кода тестами

Для проверки покрытия кода тестами можно использовать `pytest-cov`:

```sh
pytest --cov=src
```

Где `src` — папка с исходным кодом.

## Логирование и отчеты

Для генерации HTML-отчёта о покрытии выполните:

```sh
pytest --cov=src --cov-report=html
```

## Лицензия

Этот проект распространяется под лицензией MIT. Подробнее см. в файле LICENSE.


